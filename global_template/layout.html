{% extends 'base_template.html' %}
{% load static %}
{% block style %}
{% endblock style %}
{% block content %}
    <!--This is the page that defines the layout of the entire webapp-->
    <!--Just import this layout and override its blocks-->
    <!-- Page Wrapper -->
    <div id="wrapper">
        <!-- Sidebar -->
        <ul class="navbar-nav bg-gray-900 text-gray-100 sidebar sidebar-dark accordion"
            id="accordionSidebar">
            <!-- Sidebar - Brand -->
            <a class="sidebar-brand d-flex bg-danger align-items-center justify-content-center"
               href
               {% url 'dashboard' %}>
                <span class="small">Information Management System</span>
            </a>
            <li class="nav-item text-center small">
                <span class="small badge  text-success">{{ user.username |capfirst }} online</span>
            </li>
            <!-- Nav Item - Dashboard -->
            <li class="nav-item">
                <a class="nav-link" href="{% url 'dashboard' %}">
                    <i class="fas fa-fw fa-tachometer-alt"></i>
                    <span>Dashboard</span></a>
            </li>
            {% if perms.student.add_student and perms.student.view_student %}
                <!-- Divider -->
                <hr class="sidebar-divider">
                <!-- Heading -->
                <div class="sidebar-heading">Students</div>
                <li class="nav-item">
                    <a class="nav-link collapsed"
                       href="#"
                       data-toggle="collapse"
                       data-target="#collapseStudents"
                       aria-expanded="true"
                       aria-controls="collapseStudents">
                        <i class="fas fa-fw fa-male"></i>
                        <span>Students</span>
                    </a>
                    <div id="collapseStudents"
                         class="collapse"
                         aria-labelledby="headingUtilities"
                         data-parent="#accordionSidebar">
                        <div class="bg-white py-2 collapse-inner rounded">
                            <a class="collapse-item" href="{% url 'register_student' %}">Register New Student</a>
                            <a class="collapse-item" href="{% url 'students' %}">View Students</a>
                        </div>
                    </div>
                </li>
            {% endif %}
            <!-- Divider -->
            <hr class="sidebar-divider">
            <!-- Heading -->
            <div class="sidebar-heading">Petty Cash</div>
            <li class="nav-item">
                <a class="nav-link collapsed"
                   href="#"
                   data-toggle="collapse"
                   data-target="#collapseBills"
                   aria-expanded="true"
                   aria-controls="collapseBills">
                    <i class="fas fa-fw fa-money-bill"></i>
                    <span>Petty Cash</span>
                </a>
                <div id="collapseBills"
                     class="collapse"
                     aria-labelledby="headingUtilities"
                     data-parent="#accordionSidebar">
                    <div class="bg-white py-2 collapse-inner rounded">
                        {% if perms.bill.can_create_a_bill %}
                            <a class="collapse-item" href="{% url 'create_bill' %}">Record New Bill</a>
                        {% endif %}
                        {% if perms.bill.can_topup_pettycash %}
                            <a class="collapse-item" href="{% url 'topup' %}">Top Up</a>
                        {% endif %}
                        <a class="collapse-item" href="{% url 'bills' %}">View Usage</a>
                        {% if perms.bill.can_view_summaries %}
                            <a class="collapse-item" href="{% url 'bill_summaries' %}">View Summaries</a>
                        {% endif %}
                    </div>
                </div>
            </li>
            <!-- Divider -->
            <hr class="sidebar-divider">
            <!-- Heading -->
            <div class="sidebar-heading">Fees Payments</div>
            <li class="nav-item">
                <a class="nav-link collapsed"
                   href="#"
                   data-toggle="collapse"
                   data-target="#collapsePayments"
                   aria-expanded="true"
                   aria-controls="collapsePayments">
                    <i class="fas fa-fw fa-receipt"></i>
                    <span>Fees Payments</span>
                </a>
                <div id="collapsePayments"
                     class="collapse"
                     aria-labelledby="headingUtilities"
                     data-parent="#accordionSidebar">
                    <div class="bg-white py-2 collapse-inner rounded">
                        {% if perms.payment.can_add_fees_payments %}
                            <a class="collapse-item" href="{% url 'create_payment' %}">Record Fees Payment</a>
                        {% endif %}
                        <a class="collapse-item" href="{% url 'payments' %}">View Fees Payments</a>
                        {% if perms.payment.can_view_summaries %}
                            <a class="collapse-item" href="{% url 'payment_summaries' %}">View Summaries</a>
                        {% endif %}
                    </div>
                </div>
            </li>
            <!-- Divider -->
            <hr class="sidebar-divider">
            <!-- Heading -->
            <div class="sidebar-heading">School Expenses</div>
            <li class="nav-item">
                <a class="nav-link collapsed"
                   href="#"
                   data-toggle="collapse"
                   data-target="#collapseExpenses"
                   aria-expanded="true"
                   aria-controls="collapseExpenses">
                    <i class="fas fa-fw fa-money-bill"></i>
                    <span>School Expenses</span>
                </a>
                <div id="collapseExpenses"
                     class="collapse"
                     aria-labelledby="headingUtilities"
                     data-parent="#accordionSidebar">
                    <div class="bg-white py-2 collapse-inner rounded">
                        {% if perms.expenses.can_create_an_expense %}
                            <a class="collapse-item" href="{% url 'add_expense' %}">Record Expense</a>
                        {% endif %}
                        {% if perms.expenses.can_view_expenses %}
                            <a class="collapse-item" href="{% url 'expenses' %}">View Expenses</a>
                        {% endif %}
                        {% if perms.expenses.can_view_summaries %}
                            <a class="collapse-item" href="{% url 'expense_summaries' %}">View Summaries</a>
                        {% endif %}
                    </div>
                </div>
            </li>
            <!-- Divider -->
            <hr class="sidebar-divider">
            <div class="sidebar-heading">Academic Calendar</div>
            <li class="nav-item">
                <a class="nav-link collapsed"
                   href="#"
                   data-toggle="collapse"
                   data-target="#collapseAcademicCalendar"
                   aria-expanded="true"
                   aria-controls="collapseAcademicCalendar">
                    <i class="fas fa-calendar"></i>
                    <span>Academic Calendar</span>
                </a>
                <div id="collapseAcademicCalendar"
                     class="collapse"
                     aria-labelledby="headingUtilities"
                     data-parent="#accordionSidebar">
                    <div class="bg-white py-2 collapse-inner rounded">
                        {% if perms.fees_structure.can_create_the_fees_structure %}
                            <a class="collapse-item" href="{% url 'create_fees_structure' %}">Add Fees Item</a>
                        {% endif %}
                    </div>
                </div>
            </li>
            <!-- Divider -->
            <hr class="sidebar-divider">
            <div class="sidebar-heading">
                Fees Structure
            </div>
            <li class="nav-item">
                <a class="nav-link collapsed"
                   href="#"
                   data-toggle="collapse"
                   data-target="#collapseFeesStructure"
                   aria-expanded="true"
                   aria-controls="collapseFeesStructure">
                    <i class="fas fa-money-bill"></i>
                    <span>Fees Structure</span>
                </a>
                <div id="collapseFeesStructure"
                     class="collapse"
                     aria-labelledby="headingUtilities"
                     data-parent="#accordionSidebar">
                    <div class="bg-white py-2 collapse-inner rounded">
                        {% if perms.fees_structure.can_create_the_fees_structure %}
                            <a class="collapse-item" href="{% url 'create_fees_structure' %}">Add Billing Item</a>
                            <a class="collapse-item" href="{% url 'view_fees_structure' %}">View Billing Items</a>
                        {% endif %}
                    </div>
                </div>
            </li>
            <!--{% if perms.report.view_report %}
                <hr class="sidebar-divider">
                
                <div class="sidebar-heading">Reports</div>
                <li class="nav-item">
                    <a class="nav-link collapsed" href="#" data-toggle="collapse" data-target="#collapseReports" aria-expanded="true" aria-controls="collapseReports">
                        <i class="fas fa-fw fa-file-pdf"></i>
                        <span>Reports</span>
                    </a>
                    <div id="collapseReports" class="collapse" aria-labelledby="headingUtilities" data-parent="#accordionSidebar">
                        <div class="bg-white py-2 collapse-inner rounded">
                            <h6 class="collapse-header">Available Reports:</h6>
                            <a class="collapse-item" href="{% url 'fees_arrears_report' %}">Fees Arrears</a>
                            <a class="collapse-item" href="{% url 'lunch_subscribers_report' %}">Lunch Subscribers</a>
                            <a class="collapse-item" href="{% url 'transport_subscribers_report' %}">Transport
                            Subscribers</a>
                        </div>
                    </div>
                </li>
            {% endif %}
        -->
            <!-- Divider -->
            <!-- Divider -->
            <hr class="sidebar-divider">
            <!-- Heading -->
            <div class="sidebar-heading">
                Account
            </div>
            <li class="nav-item">
                <a class="nav-link collapsed"
                   href="#"
                   data-toggle="collapse"
                   data-target="#collapseAccount"
                   aria-expanded="true"
                   aria-controls="collapseAccount">
                    <i class="fas fa-fw fa-user"></i>
                    <span>Account</span>
                </a>
                <div id="collapseAccount"
                     class="collapse"
                     aria-labelledby="headingUtilities"
                     data-parent="#accordionSidebar">
                    <div class="bg-white py-2 collapse-inner rounded">
                        <a class="collapse-item" href="#">QuickBooks Settings</a>
                        <a class="collapse-item" href="{% url 'password_change' %}">Change Password</a>
                        <a class="collapse-item" href="{% url 'logout_user' %}">Logout</a>
                    </div>
                </div>
            </li>
            <!--
            <hr class="sidebar-divider">
            <span class="small text-center text-white">Allied Software Consultancy</span>
            <span class="small text-center text-white">copyright &copy; 2022</span>
-->
        </ul>
        <!-- End of Sidebar -->
        <!--Pages Go inside this layout wrapped in content wrappers-->
        <!-- Content Wrapper -->
        <div id="content-wrapper" class="d-flex flex-column">
            <!-- Main Content -->
            <div id="content" class="bg-gray-300 text-gray-900">
                <!--This is for the content of individual pages-->
                {% block page %}{% endblock %}
            </div>
            <!-- End of Main Content -->
        </div>
        <!-- End of Content Wrapper -->
    </div>
    <!-- End of Page Wrapper -->
    <!-- Scroll to Top Button-->
    <a class="scroll-to-top rounded" href="#page-top">
        <i class="fas fa-angle-up"></i>
    </a>
    <!-- Logout Modal-->
    <div class="modal fade text-gray-900"
         id="logoutModal"
         tabindex="-1"
         role="dialog"
         aria-labelledby="exampleModalLabel"
         aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">
                        Ready to Leave?
                    </h5>
                    <button class="close" type="button" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">�</span>
                    </button>
                </div>
                <div class="modal-body">
                    Select "Logout" below if you are ready to end your current session.
                </div>
                <div class="modal-footer">
                    <button class="btn btn-secondary btn-sm" type="button" data-dismiss="modal">
                        Cancel
                    </button>
                    <a class="btn btn-danger btn-sm" href="{% url 'logout_user' %}">Logout</a>
                </div>
            </div>
        </div>
    </div>
{% endblock %}
